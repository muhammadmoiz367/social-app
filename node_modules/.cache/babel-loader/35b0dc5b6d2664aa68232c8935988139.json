{"ast":null,"code":"import firebase, { db } from '../firebase/firebase';\nimport { GET_POSTS } from '../actionConstants';\nimport 'firebase/firestore';\n\nfunction getPosts(data) {\n  return {\n    type: GET_POSTS,\n    data\n  };\n}\n\nexport const handleInitialData = () => {\n  return (dispatch, getState, {\n    getFirebase,\n    getFirestore\n  }) => {\n    const firebase = getFirebase();\n    const firestore = getFirebase().firestore();\n    let posts = [];\n    let id;\n    db.collection(\"posts\").get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        id = doc.id;\n        consolelog(id);\n        posts.push({\n          id: {\n            body: doc.data().body,\n            commentCount: doc.data().commentCount,\n            likeCount: doc.data().likeCount,\n            createdAt: doc.data().createdAt,\n            userHandle: doc.data().userHandle,\n            userImage: doc.data().userImage\n          }\n        });\n      });\n      dispatch(getPosts(posts));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};","map":{"version":3,"sources":["E:/react/react-redux/social-app/src/actions/dataActions.js"],"names":["firebase","db","GET_POSTS","getPosts","data","type","handleInitialData","dispatch","getState","getFirebase","getFirestore","firestore","posts","id","collection","get","then","querySnapshot","forEach","doc","consolelog","push","body","commentCount","likeCount","createdAt","userHandle","userImage","catch","err","console","log"],"mappings":"AACA,OAAOA,QAAP,IAAmBC,EAAnB,QAA6B,sBAA7B;AACA,SAAQC,SAAR,QAAwB,oBAAxB;AACA,OAAO,oBAAP;;AAEA,SAASC,QAAT,CAAkBC,IAAlB,EAAuB;AACrB,SAAM;AACJC,IAAAA,IAAI,EAAEH,SADF;AAEJE,IAAAA;AAFI,GAAN;AAID;;AAED,OAAO,MAAME,iBAAiB,GAAC,MAAI;AACjC,SAAO,CAACC,QAAD,EAAWC,QAAX,EAAqB;AAACC,IAAAA,WAAD;AAAcC,IAAAA;AAAd,GAArB,KAAmD;AACxD,UAAMV,QAAQ,GAACS,WAAW,EAA1B;AACA,UAAME,SAAS,GAACF,WAAW,GAAGE,SAAd,EAAhB;AACA,QAAIC,KAAK,GAAC,EAAV;AACA,QAAIC,EAAJ;AACAZ,IAAAA,EAAE,CAACa,UAAH,CAAc,OAAd,EAAuBC,GAAvB,GACCC,IADD,CACOC,aAAD,IAAmB;AACvBA,MAAAA,aAAa,CAACC,OAAd,CAAuBC,GAAD,IAAQ;AAC5BN,QAAAA,EAAE,GAACM,GAAG,CAACN,EAAP;AACAO,QAAAA,UAAU,CAACP,EAAD,CAAV;AACAD,QAAAA,KAAK,CAACS,IAAN,CAAW;AACPR,UAAAA,EAAE,EAAE;AACFS,YAAAA,IAAI,EAAEH,GAAG,CAACf,IAAJ,GAAWkB,IADf;AAEFC,YAAAA,YAAY,EAAEJ,GAAG,CAACf,IAAJ,GAAWmB,YAFvB;AAGFC,YAAAA,SAAS,EAAEL,GAAG,CAACf,IAAJ,GAAWoB,SAHpB;AAIFC,YAAAA,SAAS,EAAEN,GAAG,CAACf,IAAJ,GAAWqB,SAJpB;AAKFC,YAAAA,UAAU,EAAEP,GAAG,CAACf,IAAJ,GAAWsB,UALrB;AAMFC,YAAAA,SAAS,EAAER,GAAG,CAACf,IAAJ,GAAWuB;AANpB;AADG,SAAX;AAUD,OAbD;AAcApB,MAAAA,QAAQ,CAACJ,QAAQ,CAACS,KAAD,CAAT,CAAR;AACD,KAjBD,EAkBCgB,KAlBD,CAkBOC,GAAG,IAAE;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KApBD;AAqBD,GA1BD;AA2BD,CA5BM","sourcesContent":["\r\nimport firebase, { db } from '../firebase/firebase';\r\nimport {GET_POSTS} from '../actionConstants'\r\nimport 'firebase/firestore';\r\n\r\nfunction getPosts(data){\r\n  return{\r\n    type: GET_POSTS,\r\n    data\r\n  }\r\n}\r\n\r\nexport const handleInitialData=()=>{\r\n  return (dispatch, getState, {getFirebase, getFirestore})=>{\r\n    const firebase=getFirebase();\r\n    const firestore=getFirebase().firestore()\r\n    let posts=[];\r\n    let id\r\n    db.collection(\"posts\").get()\r\n    .then((querySnapshot) => {\r\n      querySnapshot.forEach((doc) =>{\r\n        id=doc.id\r\n        consolelog(id)\r\n        posts.push({\r\n            id: {\r\n              body: doc.data().body,\r\n              commentCount: doc.data().commentCount,\r\n              likeCount: doc.data().likeCount,\r\n              createdAt: doc.data().createdAt,\r\n              userHandle: doc.data().userHandle,\r\n              userImage: doc.data().userImage\r\n            }\r\n          })\r\n      });\r\n      dispatch(getPosts(posts))\r\n    })\r\n    .catch(err=>{\r\n      console.log(err)\r\n    })\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}