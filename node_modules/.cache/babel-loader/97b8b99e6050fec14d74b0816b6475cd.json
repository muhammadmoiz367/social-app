{"ast":null,"code":"var _jsxFileName = \"E:\\\\react\\\\react-redux\\\\social-app\\\\src\\\\components\\\\newPost.js\";\nimport React, { useState } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport clsx from 'clsx';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport ImageRoundedIcon from '@material-ui/icons/ImageRounded';\nimport TextFieldsRoundedIcon from '@material-ui/icons/TextFieldsRounded';\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\nimport StepConnector from '@material-ui/core/StepConnector';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport ImageForm from '../components/imageForm';\nimport TextForm from '../components/textForm';\nimport { createPost } from '../actions/dataActions';\nconst ColorlibConnector = withStyles({\n  alternativeLabel: {\n    top: 22\n  },\n  active: {\n    '& $line': {\n      backgroundImage: 'linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)'\n    }\n  },\n  completed: {\n    '& $line': {\n      backgroundImage: 'linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)'\n    }\n  },\n  line: {\n    height: 3,\n    border: 0,\n    backgroundColor: '#eaeaf0',\n    borderRadius: 1\n  }\n})(StepConnector);\nconst useColorlibStepIconStyles = makeStyles({\n  root: {\n    backgroundColor: '#ccc',\n    zIndex: 1,\n    color: '#fff',\n    width: 50,\n    height: 50,\n    display: 'flex',\n    borderRadius: '50%',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  active: {\n    backgroundImage: 'linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)',\n    boxShadow: '0 4px 10px 0 rgba(0,0,0,.25)'\n  },\n  completed: {\n    backgroundImage: 'linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)'\n  }\n});\n\nfunction ColorlibStepIcon(props) {\n  const classes = useColorlibStepIconStyles();\n  const {\n    active,\n    completed\n  } = props;\n  const icons = {\n    1: /*#__PURE__*/React.createElement(ImageRoundedIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 8\n      }\n    }),\n    2: /*#__PURE__*/React.createElement(TextFieldsRoundedIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 8\n      }\n    }),\n    3: /*#__PURE__*/React.createElement(VideoLabelIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 8\n      }\n    })\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.root, {\n      [classes.active]: active,\n      [classes.completed]: completed\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, icons[String(props.icon)]);\n}\n\nfunction getSteps() {\n  return ['Select picture', 'Write caption', 'Create post'];\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%'\n  },\n  button: {\n    marginRight: theme.spacing(1)\n  },\n  instructions: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  }\n}));\n\nfunction NewPost(props) {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const steps = getSteps();\n  const [image, setImage] = useState('');\n  const [text, setText] = useState('');\n  const [url, setUrl] = useState('');\n\n  function handleImageChange(image, url) {\n    setImage(image);\n    setUrl(url);\n  }\n\n  function handleTextChange(text) {\n    setText(text);\n  }\n\n  function getStepContent(step) {\n    switch (step) {\n      case 0:\n        return /*#__PURE__*/React.createElement(ImageForm, {\n          onHandleImageChange: handleImageChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }\n        });\n\n      case 1:\n        return /*#__PURE__*/React.createElement(TextForm, {\n          onHandleTextChange: handleTextChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }\n        });\n\n      case 2:\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: url,\n          alt: image,\n          style: {\n            display: `${url} ? block :  none`\n          },\n          className: \"uploadedImage\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 11\n          }\n        }, text));\n\n      default:\n        return 'Unknown step';\n    }\n  }\n\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  const handleSubmitPost = () => {\n    console.log(props);\n    const newPostData = {\n      body: text,\n      userHandle: props.user.credentials.handle,\n      userImage: props.user.credentials.imageUrl,\n      createdAt: new Date().toISOString(),\n      postImage: image,\n      likeCount: 0,\n      commentCount: 0\n    };\n    console.log(newPost); //props.dispatch(createPost())\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    className: \"timeline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Stepper, {\n    alternativeLabel: true,\n    activeStep: activeStep,\n    connector: /*#__PURE__*/React.createElement(ColorlibConnector, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 68\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, steps.map(label => /*#__PURE__*/React.createElement(Step, {\n    key: label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(StepLabel, {\n    StepIconComponent: ColorlibStepIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, label)))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, activeStep === steps.length ? handleSubmitPost() : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.instructions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, getStepContent(activeStep)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: activeStep === 0,\n    onClick: handleBack,\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleNext,\n    className: classes.button,\n    style: {\n      backgroundColor: 'rgb(228,64,95)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, activeStep === steps.length - 1 ? 'Post' : 'Next')))));\n}\n\nconst mapStateToProps = ({\n  user\n}) => {\n  return {\n    user\n  };\n};\n\nexport default connect(mapStateToProps)(NewPost);","map":{"version":3,"sources":["E:/react/react-redux/social-app/src/components/newPost.js"],"names":["React","useState","makeStyles","withStyles","connect","clsx","Stepper","Step","StepLabel","ImageRoundedIcon","TextFieldsRoundedIcon","VideoLabelIcon","StepConnector","Button","Typography","ImageForm","TextForm","createPost","ColorlibConnector","alternativeLabel","top","active","backgroundImage","completed","line","height","border","backgroundColor","borderRadius","useColorlibStepIconStyles","root","zIndex","color","width","display","justifyContent","alignItems","boxShadow","ColorlibStepIcon","props","classes","icons","String","icon","getSteps","useStyles","theme","button","marginRight","spacing","instructions","marginTop","marginBottom","NewPost","activeStep","setActiveStep","steps","image","setImage","text","setText","url","setUrl","handleImageChange","handleTextChange","getStepContent","step","handleNext","prevActiveStep","handleBack","handleSubmitPost","console","log","newPostData","body","userHandle","user","credentials","handle","userImage","imageUrl","createdAt","Date","toISOString","postImage","likeCount","commentCount","newPost","map","label","length","mapStateToProps"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport {connect} from 'react-redux'\r\nimport clsx from 'clsx';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport ImageRoundedIcon from '@material-ui/icons/ImageRounded';\r\nimport TextFieldsRoundedIcon from '@material-ui/icons/TextFieldsRounded';\r\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\r\nimport StepConnector from '@material-ui/core/StepConnector';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ImageForm from '../components/imageForm'\r\nimport TextForm from '../components/textForm'\r\nimport {createPost} from '../actions/dataActions'\r\n\r\nconst ColorlibConnector = withStyles({\r\n    alternativeLabel: {\r\n      top: 22,\r\n    },\r\n    active: {\r\n      '& $line': {\r\n        backgroundImage:\r\n          'linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)',\r\n      },\r\n    },\r\n    completed: {\r\n      '& $line': {\r\n        backgroundImage:\r\n          'linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)',\r\n      },\r\n    },\r\n    line: {\r\n      height: 3,\r\n      border: 0,\r\n      backgroundColor: '#eaeaf0',\r\n      borderRadius: 1,\r\n    },\r\n  })(StepConnector);\r\n\r\nconst useColorlibStepIconStyles = makeStyles({\r\n    root: {\r\n      backgroundColor: '#ccc',\r\n      zIndex: 1,\r\n      color: '#fff',\r\n      width: 50,\r\n      height: 50,\r\n      display: 'flex',\r\n      borderRadius: '50%',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n    },\r\n    active: {\r\n      backgroundImage:\r\n        'linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)',\r\n      boxShadow: '0 4px 10px 0 rgba(0,0,0,.25)',\r\n    },\r\n    completed: {\r\n      backgroundImage:\r\n        'linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)',\r\n    },\r\n  });\r\n\r\n\r\nfunction ColorlibStepIcon(props) {\r\n  const classes = useColorlibStepIconStyles();\r\n  const { active, completed } = props;\r\n\r\n  const icons = {\r\n    1: <ImageRoundedIcon />,\r\n    2: <TextFieldsRoundedIcon />,\r\n    3: <VideoLabelIcon />,\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={clsx(classes.root, {\r\n        [classes.active]: active,\r\n        [classes.completed]: completed,\r\n      })}\r\n    >\r\n      {icons[String(props.icon)]}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getSteps() {\r\n  return ['Select picture', 'Write caption', 'Create post'];\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  button: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  instructions: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n}));\r\n\r\n\r\nfunction NewPost(props) {\r\n  const classes = useStyles();\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const steps = getSteps();\r\n\r\n  const [image, setImage] = useState('')\r\n  const [text, setText] = useState('')\r\n  const [url, setUrl] = useState('')\r\n\r\n  function handleImageChange(image, url){\r\n    setImage(image);\r\n    setUrl(url);\r\n  }\r\n  function handleTextChange(text){\r\n    setText(text)\r\n  }\r\n\r\n  function getStepContent(step) {\r\n    switch (step) {\r\n      case 0:\r\n        return (<ImageForm onHandleImageChange={handleImageChange}/>);\r\n      case 1:\r\n        return (<TextForm onHandleTextChange={handleTextChange} />);\r\n      case 2:\r\n        return (<div>\r\n          <img src={url} alt={image} style={{display: `${url} ? block :  none`}} className=\"uploadedImage\" />\r\n          <p>{text}</p>\r\n        </div>);\r\n      default:\r\n        return 'Unknown step';\r\n    }\r\n  }\r\n\r\n  const handleNext = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n  const handleSubmitPost=()=>{\r\n    console.log(props);\r\n    const newPostData={\r\n      body: text,\r\n      userHandle: props.user.credentials.handle,\r\n      userImage: props.user.credentials.imageUrl,\r\n      createdAt: new Date().toISOString(),\r\n      postImage: image,\r\n      likeCount: 0,\r\n      commentCount: 0\r\n    }\r\n    console.log(newPost);\r\n    //props.dispatch(createPost())\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root} className=\"timeline\">\r\n\r\n      <Stepper alternativeLabel activeStep={activeStep} connector={<ColorlibConnector />}>\r\n        {steps.map((label) => (\r\n          <Step key={label}>\r\n            <StepLabel StepIconComponent={ColorlibStepIcon}>{label}</StepLabel>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n\r\n      <div>\r\n        {activeStep === steps.length\r\n        ? handleSubmitPost()\r\n        : (\r\n          <div>\r\n            <Typography className={classes.instructions}>{getStepContent(activeStep)}</Typography>\r\n            <div>\r\n              <Button disabled={activeStep === 0} onClick={handleBack} className={classes.button} >\r\n                Back\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleNext}\r\n                className={classes.button}\r\n                style={{backgroundColor:'rgb(228,64,95)'}}\r\n\r\n              >\r\n                {activeStep === steps.length - 1 ? 'Post' : 'Next'}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps=({user})=>{\r\n  return{\r\n    user\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(NewPost)"]},"metadata":{},"sourceType":"module"}